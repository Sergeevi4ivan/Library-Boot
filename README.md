# Library-Boot
Spring Boot, Spring Security, Spring Data Jpa, PostgreSQL, Thymeleaf

## Задача.
Веб-приложение для учёта книг и читателей в библиотеке. Приложение содержит список читателей с возможностью просмотра, удаления и редактирования. Также есть воможность просмотра всех книг, удаления, редактирования, закрепления за читателем и открепления от читателя каждой книги. 
Также реализовал сортировку книг по году написания, пагинацию книг (постраничное оттображение книг по 3 штуки), добавил страницу поиска книг (вводим в поле на странице начальные буквы названия книги и получаем полное название книги, имя автора и у кого книга находится),
добавил автоматическую проверку на то, что человек просрочил возврат книги (если книга у человека больше 10 дней, то книга отображается у человека красным цветом). 
При обращении к приложению пользователь перенаправляется на форму входа для ввода логина и пароля. Есть 2 типа пользователей - администратор и читатель. Администратор имеет доступ к списку всех читателей, редактированию читателей или удалению читателей, списку книг, редактированию или удалению книг и т.д.
При регистрации нового читателя, если нет ещё ни одного администратора, то создаётся администратор по умолчанию (логин: "admin", пароль: "admin").
Читатель имеет доступ только к формам с книгами.
На каждой форме есть возможность разлогиниться (выйти из своей учётной записи).

Данные хранятся в базе данных под управлением PostgreSQL 15. Обращение к базе данных осуществляется посредством Spring Data JPA.

После успешной регистрации администратора при обращении к приложению отображается список записей читателей (/people). Обеспечена возможность создать запись, а также изменить или удалить любую запись в списке. При создании и изменении записи должна открываться описанная выше форма с возможностью сохранения изменений и отмены сохранения.
Список книг отображается при переходе по адресу "/books"

Страница обращается к web - сервису на сервере, используя REST протокол.

### После запуска приложения переход по следующим URL даст возможности:
`http://localhost:8081/people` - отображение списка читателей, где можно перейти по ссылке для добавления новой записи или перейти для просмотра, редактирования или удаления конкретного читателя

`http://localhost:8081/people/new` - форма для добавления нового читателя в БД

`http://localhost:8081/people/id` (где id это номер записи в БД) - подробный просмотр конкретной записи с возможностью редактирования или удаления записи 

`http://localhost:8081/books` - отображение списка книг, где можно перейти по ссылке для добавления новой записи, перейти для просмотра, редактирования или удаления конкретной книги или перейти на страницу поиска книги

`http://localhost:8081/books/new` - форма для добавления новой книги в БД

`http://localhost:8081/books/id` (где id это номер книги в БД) - подробный просмотр конкретной книги с возможностью редактирования или удаления книги 

`http://localhost:8081/books/search` - форма для поиска книг

`http://localhost:8081/books?sort=true` - сортировка книг по году

`http://localhost:8081/books?page=1&booksPerPage=3` - постраничное отображение книг

`http://localhost:8081/books?page=1&booksPerPage=3&sort=true` - сортировка книг по году и постраничное отображение книг

`http://localhost:8081/auth/login` - войти под своей учётной записью

`http://localhost:8081/auth/registration` - регистрация нового пользователя



### При решении задачи использовался PostgreSQL 15, Spring Boot version 6.0.12, Spring Secrity version 6.0.12, Spring Data JPA version 6.0.12, thymeleaf-spring6.

### Вы можете клонировать на свой компьютер программу и опробовать или изучить её. 
  Для того, чтобы клонировать себе программу выполните следующие дествия:

1. На GitHub.com перейдите на главную страницу репозитория.

2. Над списком файлов щелкните <>Code.

3. Скопируйте URL-адрес репозитория.

   * Чтобы клонировать репозиторий по протоколу HTTPS, в разделе "HTTPS" щелкните значёк "копировать".
   * Чтобы клонировать репозиторий с помощью ключа SSH, включая сертификат, выданный центром сертификации SSH вашей организации, щелкните SSH, а затем выберите "копировать".
   * Чтобы клонировать репозиторий с помощью GitHub CLI, щелкните GitHub CLI, а затем выберите "копировать".
     
4. Откройте GIT Bash.

5. Измените текущий рабочий каталог на расположение, где должен находиться клонированный каталог.

6. Введите git clone и вставьте URL-адрес, скопированный ранее.

   >git clone https://github.com/YOUR-USERNAME/YOUR-REPOSITORY

7. Нажмите клавишу ВВОД, чтобы создать локальный клон.

   >$ git clone https://github.com/YOUR-USERNAME/YOUR-REPOSITORY

   >Cloning into Spoon-Knife...

   >remote: Counting objects: 10, done.

   >remote: Compressing objects: 100% (8/8), done.

   >remove: Total 10 (delta 1), reused 10 (delta 1)

   >Unpacking objects: 100% (10/10), done.

### Перед запуском программы необходимо:

Переименовать файл hibernate.properties.origin в файл hibernate.properties

В файле hibernate.propeties прописать имя пользователя и пароль для вашей БД.

### Пример кода для создания таблицы в БД: 

>CREATE TABLE Person(

  >person_id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,

  >name varchar(100) NOT NULL,

  >age int CHECK ( age > 0 ),

  >date_of_birth DATE,

  >created_at TIMESTAMP,

  >username varchar(100),

  >password varchar(100),

  >role varchar(100),

  >);


>CREATE TABLE Book(

    >book_id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    
    >person_id int REFERENCES Person(person_id) ON DELETE SET NULL,
    
    >title varchar(200) NOT NULL,
    
    >author varchar(100) NOT NULL,
    
    >year_production int,

    >assign_at TIMESTAMP,
    
>);


### Пример кода для заполнения таблицы данными:

>INSERT INTO Book(person_id, title, author, year_production) VALUES (1, 'Психопатология обыденной жизни', 'Зигмунд Фрейд', 1904);

>INSERT INTO Book(person_id, title, author, year_production) VALUES (2, 'Война и мир', 'Лев Николаевич Толстой', 1873);

>INSERT INTO Book(person_id, title, author, year_production) VALUES (3, 'Герой нашего времени', 'Михаил Юрьевич Лермонтов', 1841);

>INSERT INTO Book(person_id, title, author, year_production) VALUES (4, 'му-му', 'Иван Сергеевич Тургенев', 1852);

>INSERT INTO Book(title, author, year_production) VALUES ('Дубровский', 'Александр Сергеевич Пушкин', 1841);
